# ログサマリー（軽量ドライラン）

## 実行条件
- デバイス: CPU（`threads=1`、`workers=0`）
- データ: `data/dummy.mat`（N=16, 32x32x3, labelsあり）
- SimSiam: `epochs=1, batch_size=2, image_size=64, limit_batches=1`
- FastAP: `epochs=1, batch_size=2, image_size=64, limit_batches=1`
- ログ出力先: `mat_ssl/logs/*.log`

## SimSiam 要約
- デバイス: cpu
- データセット: files=1, samples=16, image_key=images
- 進行:
  - step=1 loss=0.0014
  - Epoch 1 終了: loss=0.0002, checkpoint保存
- ログ: `mat_ssl/logs/simsiam_20250825-100659.log`

## FastAP 微調整 要約
- デバイス: cpu
- データセット: files=1, samples=16, image_key=images, label_key=labels
- 事前学習重みロード:
  - `runs/simsiam_dry/checkpoints/last.pth` からバックボーン読込
  - 注意: `missing`/`unexpected` キーが多数（ロード先モジュール名とキー整合ズレ）
- 進行:
  - Epoch 1 実行、checkpoint保存（lossはログに逐次記録）
- ログ: `mat_ssl/logs/fastap_finetune_20250825-100711.log`

## 気づき / 改善提案
- バックボーン重みロード時の`missing`/`unexpected`が多いのは、SimSiam保存時の`backbone.*`と微調整側`ResNet50Backbone`のキー体系の差分が原因。
  - 改善: `ResNet50Backbone`に直接`state_dict`をマッピングする際、`backbone.`プレフィクスを付与してロードする処理に変更。
- 低負荷検証の目的（疎通確認: データ→前処理→前向き→損失→逆伝播→保存）は達成。
- 実データ運用時は、`limit_batches`を段階的に解除、`image_size`/`batch_size`を調整。

---
このサマリーは `mat_ssl/logs` の実行ログに基づいて作成しました。
